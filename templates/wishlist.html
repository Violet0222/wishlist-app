{% extends "layout.html" %} {% block head %}
<script src="/static/modal_window.js"></script>
<script src="/static/menu_dropdown.js"></script>
<script src="/static/wishlist-items.js"></script>
<link rel="stylesheet" href="/static/css/styles.css" />
<link rel="stylesheet" href="/static/css/wishlist_categories.css" />
<link rel="stylesheet" href="/static/css/menu_dropdown.css" />
<link rel="stylesheet" href="/static/css/modal_window.css" />

{% endblock %} {% block title %} All Wishlists{% endblock %} {% block main %}
<div class="wishlist-wrapper">
  <header class="wishlist-header">
    <h1 class="wishlist-title">üéÅ Wishlist Categories</h1>
    <p class="text-explanation">
      Use this space to organize wishlist categories and track your desired
      items. Click <strong>+ New</strong> to create a new category or click an
      existing one to manage it.
    </p>
  </header>

  <div class="wishlist-controls">
    <h3 class="wishlist-subheading">Categories</h3>
    <button id="openModalBtn" class="new-category-btn">
      <span class="plus-icon">+ New</span>
      <span class="tooltip-text">Create new category</span>
    </button>
  </div>

  <section class="category-grid">
    {% if wishlist_categories %} {% for category in wishlist_categories %}
    <div
      class="category-card"
      id="category-{{ category['id'] }}"
      style="background-color: {{ category['color'] or '#f5f5f5' }};"
    >
      <a href="/wishlist/{{ category['id'] }}" class="category-title">
        {{ category['name'] }}
      </a>
      <div
        class="dropdown-container"
        id="dropdown-container-{{ category['id'] }}"
      >
        <button class="menu-dropdown-btn" id="toggle-{{ category['id'] }}">
          ‚ãÆ
        </button>
        <span class="tooltip-text">Delete, more...</span>
        <div class="menu-dropdown" id="menu-{{ category['id'] }}">
          <span class="value-display"
            >{{ category['color'] or '#f5f5f5' }}</span
          >
          <form
            action="/wishlist/{{ category_id }}"
            method="post"
            class="hidden"
            class="color-picker-form"
          >
            <input
              type="color"
              name="card_color"
              value="{{ category['color'] or '#f5f5f5' }}"
              class="color-input"
              title="Choose background color"
            />
            <input type="hidden" value="{{ category_id }}" name="id" />
          </form>
          <button onclick="copyLink({{ category['id'] }})">Copy Link</button>
          <div id="delete-container-{{ category['id'] }}">
            <form action="/wishlist" method="post">
              <input value="delete" hidden name="delete" />
              <input type="hidden" name="id" value="{{category['id']}}" />
              <button
                name="delete"
                id="delete-button-{{ category['id'] }}"
                type="submit"
              >
                ‚ùå Delete
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>
    {% endfor %} {% else %}
    <div class="empty-state">
      <div class="empty-icon">üì≠</div>
      <p class="empty-message">No wishlist categories yet.</p>
      <p>
        Click <strong>New +</strong> above to start adding your first category!
      </p>
    </div>
    {% endif %}
  </section>

  <div id="modal" class="modal-overlay">
    <div class="modal">
      <div class="modal-header">
        <h2>Create New Category</h2>
        <button id="closeModalBtn" class="modal-close">&times;</button>
      </div>
      <form action="/create_wishlist" method="POST" class="notion-modal-form">
        <label for="category_name">Category Name</label>
        <input
          type="text"
          name="category_name"
          id="category_name"
          placeholder="Empty"
          required
        />
        <button type="submit" class="modal-submit">Create</button>
      </form>
    </div>
  </div>
</div>

{% endblock %}
